# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é real-time –ª–æ–≥–æ–≤ –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. Docker –∑–∞–ø—É—â–µ–Ω
2. –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å–æ–±—Ä–∞–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã

## –®–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ MangaService

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å MangaService
docker-compose build manga-service

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ MangaService
docker-compose logs -f manga-service
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: MangaService –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è **–ë–ï–ó –û–®–ò–ë–û–ö** —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

### 2. –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"Manga Management"**
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **"Auto-Parsing"**
3. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - **Page**: `1`
   - **Limit**: `1` (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞)
4. –ù–∞–∂–º–∏—Ç–µ **"Start Auto-Parsing"**

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ —á–µ—Ä–µ–∑ curl/Postman:
```bash
curl -X POST "http://localhost:8081/api/parser/auto-parse?page=1&limit=1"
```

–û—Ç–≤–µ—Ç:
```json
{
  "taskId": "600fcefb-66da-4909-88a8-2f60b540a84e",
  "status": "pending",
  "message": "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞–Ω–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞..."
}
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `taskId`!

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

#### –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

LogViewer –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–æ–≥–∏:

```
[2025-10-06T18:46:33] [INFO] Force mode: disabled
[2025-10-06T18:46:33] [INFO] Caching: enabled
[2025-10-06T18:46:33] [INFO] ===== PARSING =====
[2025-10-06T18:46:33] [INFO] Parser: mangalib.
[2025-10-06T18:46:33] [INFO] Parsing i-alone-level-up...
[2025-10-06T18:46:57] [INFO] Chapter 218141 downloading [1/9]
[2025-10-06T18:46:57] [INFO] [1/9] Chapter 1.0 - –ù–∞–∑–≤–∞–Ω–∏–µ parsing...
[2025-10-06T18:46:58] [INFO] [1/9] Chapter 1.0 - –ù–∞–∑–≤–∞–Ω–∏–µ completed (12 slides)
[2025-10-06T18:47:03] [INFO] [Heartbeat] –ü—Ä–æ—Ü–µ—Å—Å –∞–∫—Ç–∏–≤–µ–Ω, –ø—Ä–æ—à–ª–æ 1—Å —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

#### –ß–µ—Ä–µ–∑ API

```bash
curl "http://localhost:8081/api/parser/auto-parse/status/600fcefb-66da-4909-88a8-2f60b540a84e"
```

–û—Ç–≤–µ—Ç:
```json
{
  "taskId": "600fcefb-66da-4909-88a8-2f60b540a84e",
  "status": "running",
  "progress": 50,
  "message": "–ü–∞—Ä—Å–∏–Ω–≥ –º–∞–Ω–≥–∏ 1/1: i-alone-level-up",
  "totalSlugs": 1,
  "processedSlugs": 0,
  "importedSlugs": [],
  "skippedSlugs": [],
  "failedSlugs": [],
  "logs": [
    "[2025-10-06T18:46:33.422527] [INFO] Force mode: disabled",
    "[2025-10-06T18:46:33.422564] [INFO] Caching: enabled",
    "[2025-10-06T18:46:33.466512] [INFO] Parser: mangalib.",
    "[2025-10-06T18:46:33.467005] [INFO] Parsing i-alone-level-up...",
    "[2025-10-06T18:46:57.999887] [INFO] Chapter 218141 downloading [1/9]",
    "[2025-10-06T18:46:58.000202] [INFO] Chapter 218141 amended.",
    "[2025-10-06T18:47:03.045172] [INFO] [Heartbeat] –ü—Ä–æ—Ü–µ—Å—Å –∞–∫—Ç–∏–≤–µ–Ω..."
  ]
}
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö MangaService

```bash
docker-compose logs -f manga-service | grep -E "(–°–≤—è–∑–∞–ª–∏|addLogToTask|parseTaskId)"
```

–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:
```
AutoParsingService: –°–≤—è–∑–∞–ª–∏ parseTaskId=7c4c5b0c-9f13-4da6-98fc-0f1c0effef6d —Å autoParsingTaskId=600fcefb-66da-4909-88a8-2f60b540a84e
AutoParsingService: –°–≤—è–∑–∞–ª–∏ fullParsingTaskId=cfed1d57-4882-47b0-8df4-f1fa7ccb6613 —Å autoParsingTaskId=600fcefb-66da-4909-88a8-2f60b540a84e
MelonIntegrationService: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å–≤—è–∑—å fullParsingTaskId=cfed1d57... ‚Üí autoParsingTaskId=600fcefb...
MelonIntegrationService: –°–≤—è–∑–∞–ª–∏ buildTaskId=a1b2c3d4... —Å autoParsingTaskId=600fcefb...
ProgressController: –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –∑–∞–¥–∞—á–∏ parseTaskId=7c4c5b0c..., logs=[...]
AutoParsingService: –õ–æ–≥ –¥–ª—è parseTaskId=7c4c5b0c... –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤ autoParsingTaskId=600fcefb...
AutoParsingService: –î–æ–±–∞–≤–ª–µ–Ω –ª–æ–≥ –≤ –∑–∞–¥–∞—á—É 600fcefb...
```

**–í–∞–∂–Ω–æ**: –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ª–æ–≥–æ–≤ —Ç–∏–ø–∞:
```
WARN AutoParsingService: –ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –¥–ª—è taskId=..., –ª–æ–≥ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ LogViewer

–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ LogViewer –¥–æ–ª–∂–µ–Ω:

1. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ (—Ç–µ–º–Ω—ã–π —Ñ–æ–Ω, –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç)
2. ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞:
   - `[ERROR]` - –∫—Ä–∞—Å–Ω—ã–π
   - `[WARN]` - –∂–µ–ª—Ç—ã–π
   - `[INFO]` - –∑–µ–ª–µ–Ω—ã–π
3. ‚úÖ –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ª–æ–≥–æ–≤
4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
5. ‚úÖ –í—ã—Å–æ—Ç–∞ 400px —Å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º

### 6. –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞ (—Å—Ç–∞—Ç—É—Å `completed`):

```bash
curl "http://localhost:8081/api/parser/auto-parse/status/600fcefb-66da-4909-88a8-2f60b540a84e"
```

–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```json
{
  "status": "completed",
  "message": "–ê–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 1, –ø—Ä–æ–ø—É—â–µ–Ω–æ: 0, –æ—à–∏–±–æ–∫: 0",
  "logs": [
    "...–≤—Å–µ –ª–æ–≥–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞...",
    "...–ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ –±–∏–ª–¥–∏–Ω–≥–∞...",
    "...–ª–æ–≥–∏ –∏–º–ø–æ—Ä—Ç–∞..."
  ]
}
```

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –ª–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –≤ –ª–æ–≥–∞—Ö

```bash
docker-compose logs manga-service | grep "–°–≤—è–∑–∞–ª–∏"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å—Ç—Ä–æ–∫–∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –º–∞–Ω–≥–∏:
- parseTaskId ‚Üí autoParsingTaskId
- fullParsingTaskId ‚Üí autoParsingTaskId
- buildTaskId ‚Üí autoParsingTaskId (—á–µ—Ä–µ–∑ MelonIntegrationService)

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –æ—Ç MelonService

```bash
docker-compose logs manga-service | grep "–ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –∑–∞–¥–∞—á–∏"
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ —Å `logs=[...]`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ª–æ–≥–∏ –ù–ï –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

```bash
docker-compose logs manga-service | grep "–ª–æ–≥ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω"
```

**–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å** —Ç–∞–∫–∏—Ö —Å—Ç—Ä–æ–∫!

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MelonService

```bash
docker-compose logs melon-service | grep "Progress sent"
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ª–æ–≥–æ–≤ –≤ MangaService.

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "–û–∂–∏–¥–∞–Ω–∏–µ –ª–æ–≥–æ–≤..." –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–ü—Ä–∏—á–∏–Ω–∞**: –õ–æ–≥–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º taskId

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ 4 taskId —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ –º–∞–ø–ø–∏–Ω–≥ (—Å–º. –≤—ã—à–µ)

### –ü—Ä–æ–±–ª–µ–º–∞: –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

**–ü—Ä–∏—á–∏–Ω–∞**: `@Lazy` –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–º–ø–æ—Ä—Ç

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ `MelonIntegrationService.java`:
```java
import org.springframework.context.annotation.Lazy;

@Autowired
@Lazy
private AutoParsingService autoParsingService;
```

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–≥–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è, –Ω–æ –Ω–µ –≤—Å–µ

**–ü—Ä–∏—á–∏–Ω–∞**: Ring buffer –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 1000 —Å—Ç—Ä–æ–∫–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–∞—Ä—Å–∏–Ω–≥–æ–≤. –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –≤ `AutoParsingService.java`:
```java
if (task.logs.size() > 5000) {  // –±—ã–ª–æ 1000
    task.logs.remove(0);
}
```

## –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –õ–æ–≥–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "–ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"  
‚úÖ Heartbeat –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥  
‚úÖ –õ–æ–≥–∏ –æ—Ç –ø–∞—Ä—Å–µ—Ä–∞ (Chapter X parsing...)  
‚úÖ –õ–æ–≥–∏ –æ—Ç –±–∏–ª–¥–µ—Ä–∞ (downloading [X/Y])  
‚úÖ –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞  

üéâ **–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! Real-time –ª–æ–≥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç!** üéâ
