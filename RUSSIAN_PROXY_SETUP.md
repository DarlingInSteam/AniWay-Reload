# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –¥–ª—è MelonService

## ‚úÖ –ü–†–û–ö–°–ò –ù–ê–°–¢–†–û–ï–ù –ò –†–ê–ë–û–¢–ê–ï–¢!

### –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–∫—Å–∏:
- **IP:** 168.80.1.136
- **–ü–æ—Ä—Ç:** 8000
- **–õ–æ–≥–∏–Ω:** PS20z2
- **–ü–∞—Ä–æ–ª—å:** fFNHVg
- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:** –¥–æ 14.10.25 (6 –¥–Ω–µ–π)

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:

```bash
üß™ –¢–ï–°–¢ –†–û–°–°–ò–ô–°–ö–û–ì–û –ü–†–û–ö–°–ò –î–õ–Ø MANGALIB API
‚úÖ Proxy configured: PS20z2:***@168.80.1.136:8000
‚úÖ IP —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏: 168.80.1.136
‚úÖ MangaLib API: 200 OK - –ø–æ–ª—É—á–µ–Ω–æ 60 –º–∞–Ω–≥
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### settings.json
–§–∞–π–ª: `MelonService/Parsers/mangalib/settings.json`

```json
"proxy": {
  "enable": true,
  "host": "168.80.1.136",
  "port": "8000",
  "login": "PS20z2",
  "password": "fFNHVg"
}
```

## –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Git (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
cd c:\project\AniWayImageSystem\AniWay-Reload
git add MelonService/Parsers/mangalib/settings.json
git add MelonService/api_server.py
git add MelonService/requirements.txt
git commit -m "feat: Add Russian proxy support for MangaLib API

- Configure proxy in settings.json (168.80.1.136:8000)
- Update api_server.py to load proxy from settings.json
- Add pysocks to requirements.txt for SOCKS5 support
- Fix 403 Forbidden error from MangaLib API via proxy"
git push origin develop
```

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/AniWay-Reload
git pull origin develop

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å MelonService
docker-compose build melon-service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d melon-service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs aniway-reload-melon-service-1 --tail=50
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/AniWay-Reload/MelonService
nano Parsers/mangalib/settings.json

# –ò–∑–º–µ–Ω–∏—Ç—å —Å–µ–∫—Ü–∏—é "proxy":
"proxy": {
  "enable": true,
  "host": "168.80.1.136",
  "port": "8000",
  "login": "PS20z2",
  "password": "fFNHVg"
}

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å (Ctrl+O, Enter, Ctrl+X)

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose build melon-service
docker-compose up -d melon-service
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

```bash
docker logs aniway-reload-melon-service-1 --tail=100
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ Proxy loaded from mangalib settings: 168.80.1.136:8000
INFO:     Started server process
INFO:     Uvicorn running on http://0.0.0.0:8090
```

### 2. –¢–µ—Å—Ç API —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏

```bash
# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec -it aniway-reload-melon-service-1 bash
cd /app
python test_proxy.py

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# ‚úÖ IP —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏: 168.80.1.136
# ‚úÖ MangaLib API: 200 OK
```

### 3. –¢–µ—Å—Ç –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞

```bash
# –ß–µ—Ä–µ–∑ MangaService API
curl -X POST "http://your-server:8080/api/manga/auto-parse?parser=mangalib&page=1&limit=5"
```

–î–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å 5 –º–∞–Ω–≥ –±–µ–∑ 403 –æ—à–∏–±–æ–∫.

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
docker logs -f aniway-reload-melon-service-1
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–∫—Å–∏

–ï—Å–ª–∏ –ø—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤ –ª–æ–≥–∞—Ö –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚ùå `403 Forbidden`
- ‚ùå `Client Error`
- ‚ùå `IP blocked`

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ `200 OK`
- ‚úÖ `Successfully parsed manga`
- ‚úÖ `Task completed`

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### üîî –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∫—Å–∏: –¥–æ 14.10.25 (6 –¥–Ω–µ–π)

–ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç:
1. –ü—Ä–æ–¥–ª–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ –∫—É–ø–∏—Ç—å –Ω–æ–≤—ã–π
2. –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ `settings.json`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å MelonService

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–ê–ñ–ù–û:** –í —Ñ–∞–π–ª–µ `settings.json` —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ!

–ï—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—É–±–ª–∏—á–Ω—ã–π –∏–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø —É –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö:

1. **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ settings.json —Å –ø–∞—Ä–æ–ª—è–º–∏ –≤ Git:**

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ .gitignore
echo "MelonService/Parsers/mangalib/settings.json" >> .gitignore

# –°–æ–∑–¥–∞–π—Ç–µ —à–∞–±–ª–æ–Ω –±–µ–∑ –ø–∞—Ä–æ–ª–µ–π
cp MelonService/Parsers/mangalib/settings.json \
   MelonService/Parsers/mangalib/settings.json.example

# –û—á–∏—Å—Ç–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ example —Ñ–∞–π–ª–µ
# –ù–∞—Å—Ç–æ—è—â–∏–π settings.json –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—Ä—É—á–Ω—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞):**

–ú–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å `api_server.py` –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```python
import os

proxy_config = {
    "enable": os.getenv("PROXY_ENABLE", "false").lower() == "true",
    "host": os.getenv("PROXY_HOST", settings["proxy"]["host"]),
    "port": os.getenv("PROXY_PORT", settings["proxy"]["port"]),
    "login": os.getenv("PROXY_LOGIN", settings["proxy"]["login"]),
    "password": os.getenv("PROXY_PASSWORD", settings["proxy"]["password"])
}
```

–ó–∞—Ç–µ–º –≤ `docker-compose.yml`:

```yaml
melon-service:
  environment:
    - PROXY_ENABLE=true
    - PROXY_HOST=168.80.1.136
    - PROXY_PORT=8000
    - PROXY_LOGIN=PS20z2
    - PROXY_PASSWORD=fFNHVg
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–∫—Å–∏ (–¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∫—É–ø–∫–∏)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–æ–∫—Å–∏ (–ª—É—á—à–µ –≤—Å–µ–≥–æ –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫):**
   - proxy-sale.com - –æ—Ç 500‚ÇΩ/–º–µ—Å—è—Ü
   - proxy6.net - –æ—Ç 300‚ÇΩ/–º–µ—Å—è—Ü
   - youproxy.ru - –æ—Ç 250‚ÇΩ/–º–µ—Å—è—Ü

2. **–†–µ–∑–∏–¥–µ–Ω—Ç–Ω—ã–µ –ø—Ä–æ–∫—Å–∏ (–¥–æ—Ä–æ–∂–µ, –Ω–æ –Ω–∞–¥–µ–∂–Ω–µ–µ):**
   - proxy-cheap.com - –æ—Ç $3/GB
   - smartproxy.com - –æ—Ç $8.5/GB

3. **–î–∞—Ç–∞—Ü–µ–Ω—Ç—Ä –ø—Ä–æ–∫—Å–∏ (—Å–∞–º—ã–µ –¥–µ—à–µ–≤—ã–µ):**
   - proxy-seller.ru - –æ—Ç 50‚ÇΩ/–º–µ—Å—è—Ü
   - proxys.io - –æ—Ç $1/–º–µ—Å—è—Ü

**–°–æ–≤–µ—Ç:** –î–ª—è MangaLib –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±—ã—á–Ω—ã—Ö —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö HTTP –ø—Ä–æ–∫—Å–∏ (50-300‚ÇΩ/–º–µ—Å—è—Ü).

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: 403 Forbidden –¥–∞–∂–µ —Å –ø—Ä–æ–∫—Å–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∫—Å–∏ –≤–∫–ª—é—á–µ–Ω: `"enable": true`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∫—Å–∏ (14.10.25)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–∫—Å–∏ —Å–∞–º –ø–æ —Å–µ–±–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: `curl --proxy http://PS20z2:fFNHVg@168.80.1.136:8000 https://api.ipify.org`

### –ü—Ä–æ–±–ª–µ–º–∞: Proxy authentication required

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –≤ settings.json
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø—Ä–æ–∫—Å–∏

### –ü—Ä–æ–±–ª–µ–º–∞: Timeout

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–∫—Å–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –∏–ª–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–π
- –£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ `api_server.py`: `timeout=60`
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–æ–∫—Å–∏

### –ü—Ä–æ–±–ª–µ–º–∞: Connection refused

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∏ –ø–æ—Ä—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ –∏—Å—Ç–µ–∫

## –ò—Ç–æ–≥

‚úÖ **–ü—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω**
‚úÖ **MangaLib API –¥–æ—Å—Ç—É–ø–µ–Ω (200 OK)**
‚úÖ **–ì–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä**

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ:
1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git
2. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥

–ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ (14.10.25) - –ø—Ä–æ–¥–ª–∏—Ç—å –∏–ª–∏ –∫—É–ø–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–∫—Å–∏.
