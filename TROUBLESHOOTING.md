# Руководство по исправлению проблемы с прогрессом

## Проблема
Прогресс-бар в интерфейсе парсера застревает на 5%, несмотря на то что backend сервисы работают корректно.

## Диагностические инструменты

### 1. Страница диагностики
Перейдите на: `http://localhost:8081/parser/fix`

Эта страница содержит:
- Проверку правильности task ID
- Очистку кэша браузера
- Перезапуск задачи
- Ссылки на логи серверов

### 2. Отдельные диагностические страницы
- `diagnostics.html` - комплексная проверка всех API
- `api-test.html` - тестирование MangaService API
- `melon-test.html` - тестирование MelonService API
- `tasks-test.html` - проверка списка задач
- `quick-test.html` - быстрая проверка статуса

## Возможные решения

### Решение 1: Проверить task ID
Если task ID неправильный или задача истекла, запустите новый парсинг.

### Решение 2: Очистить кэш браузера
Иногда браузер кэширует старые ответы API. Используйте кнопку "Очистить кэш" на странице исправления.

### Решение 3: Перезапустить задачу
Если задача зависла, попробуйте её отменить и запустить заново.

### Решение 4: Проверить логи
Посмотрите логи серверов на наличие ошибок:
```bash
# MangaService логи
tail -f logs/spring.log

# MelonService логи
tail -f Logs/*.log
```

### Решение 5: Ручная проверка API
Используйте curl для прямой проверки:
```bash
# MangaService
curl http://localhost:8081/parser/status/YOUR_TASK_ID

# MelonService
curl http://localhost:8084/status/YOUR_TASK_ID
```

## Что делать, если ничего не помогает

1. **Перезапустите сервисы**:
   ```bash
   docker-compose down
   docker-compose up --build
   ```

2. **Проверьте сеть**:
   - Убедитесь, что все сервисы запущены
   - Проверьте, что порты 8081 и 8084 доступны
   - Проверьте Docker network connectivity

3. **Проверьте конфигурацию**:
   - Убедитесь, что `melon.service.url` правильно настроен
   - Проверьте переменные окружения

## Логи для отладки

В логах ищите:
- `ParserController: getStatus called` - запросы статуса
- `MelonIntegrationService: Requesting status` - запросы к MelonService
- `MelonIntegrationService: Received status` - ответы от MelonService
- Любые ошибки HTTP или сетевые ошибки

## Контакт для помощи

Если проблема persists, соберите:
1. Скриншоты страницы диагностики
2. Логи обоих сервисов
3. Результаты curl запросов
4. Версии Docker образов
