# –†–µ–∑—é–º–µ —Ñ–∏–∫—Å–∞: –ê–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ 3-4 —Ç–∞–π—Ç–ª–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Ü–µ–ª–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–∞–ª–æ–≥–∞ –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ –ø–æ—Å–ª–µ 3-4 —É—Å–ø–µ—à–Ω—ã—Ö —Ç–∞–π—Ç–ª–æ–≤ –Ω–∞—á–∏–Ω–∞–µ—Ç –∫–∏–¥–∞—Ç—å –æ—à–∏–±–∫—É **"JSON —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"** –∏ —Å–∫–∏–ø–∞–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∞–π—Ç–ª—ã.

## –ü—Ä–∏—á–∏–Ω–∞
**–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫** –≤ –º–µ—Ç–æ–¥–∞—Ö `getMangaInfo()` –∏ `getTaskStatus()`:

1. **`getMangaInfo()`** - –ø–∞–¥–∞–ª —Å **404 –æ—à–∏–±–∫–æ–π**, –µ—Å–ª–∏ JSON —Ñ–∞–π–ª –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω MelonService
2. **`getTaskStatus()`** - –ø–∞–¥–∞–ª —Å **404 –æ—à–∏–±–∫–æ–π**, –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
3. –ü—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –ø–∞—Ä—Å–∏–Ω–≥–µ MelonService **–Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç** —Å–æ–∑–¥–∞–≤–∞—Ç—å JSON —Ñ–∞–π–ª—ã
4. **–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–µ—Ä—ã–≤–∞–ª–æ –≤–µ—Å—å –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥

## –†–µ—à–µ–Ω–∏–µ

### 1. Retry –ª–æ–≥–∏–∫–∞ –≤ `getMangaInfo()` ‚úÖ

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- 5 –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è JSON —Ñ–∞–π–ª–∞
- 3 —Å–µ–∫—É–Ω–¥—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ 404 –æ—à–∏–±–æ–∫
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏
- **Graceful degradation** - –≤–æ–∑–≤—Ä–∞—Ç Map —Å –æ—à–∏–±–∫–æ–π –≤–º–µ—Å—Ç–æ exception

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –≥–æ—Ç–æ–≤ ‚Üí –∂–¥–µ–º –¥–æ 15 —Å–µ–∫—É–Ω–¥ (5 √ó 3 —Å–µ–∫)
- –ï—Å–ª–∏ —Ñ–∞–π–ª —Ç–∞–∫ –∏ –Ω–µ —Å–æ–∑–¥–∞–Ω ‚Üí –ª–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É, –Ω–æ **–∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è** –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –º–∞–Ω–≥

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ `getTaskStatus()` ‚úÖ

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- Try-catch –±–ª–æ–∫ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π 404
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—â–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- **Graceful degradation** - –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Map

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–¥–∞—á–∞–º–∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç waitForTaskCompletion()
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ

### –î–û —Ñ–∏–∫—Å–∞:
```
–ú–∞–Ω–≥–∞ 1: ‚úÖ –£—Å–ø–µ—à–Ω–æ
–ú–∞–Ω–≥–∞ 2: ‚úÖ –£—Å–ø–µ—à–Ω–æ
–ú–∞–Ω–≥–∞ 3: ‚úÖ –£—Å–ø–µ—à–Ω–æ
–ú–∞–Ω–≥–∞ 4: ‚ùå JSON –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí EXCEPTION ‚Üí –í–°–Ø –ó–ê–î–ê–ß–ê –ü–†–ï–†–´–í–ê–ï–¢–°–Ø
–ú–∞–Ω–≥–∞ 5-60: ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω—ã
```

### –ü–û–°–õ–ï —Ñ–∏–∫—Å–∞:
```
–ú–∞–Ω–≥–∞ 1: ‚úÖ –£—Å–ø–µ—à–Ω–æ
–ú–∞–Ω–≥–∞ 2: ‚úÖ –£—Å–ø–µ—à–Ω–æ
–ú–∞–Ω–≥–∞ 3: ‚úÖ –£—Å–ø–µ—à–Ω–æ
–ú–∞–Ω–≥–∞ 4: üîÑ JSON –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí RETRY (5 –ø–æ–ø—ã—Ç–æ–∫ √ó 3 —Å–µ–∫) ‚Üí ‚úÖ –ò–õ–ò ‚ùå graceful fail
–ú–∞–Ω–≥–∞ 5-60: ‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
```

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**`MangaService/src/main/java/shadowshift/studio/mangaservice/service/MelonIntegrationService.java`**

1. **`getMangaInfo(String filename)`** (—Å—Ç—Ä–æ–∫–∏ 346-398)
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ü–∏–∫–ª retry —Å maxRetries=5
   - ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ retryDelayMs=3000 (3 —Å–µ–∫)
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ HttpClientErrorException.NotFound
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
   - ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫

2. **`getTaskStatus(String taskId)`** (—Å—Ç—Ä–æ–∫–∏ 298-330)
   - ‚úÖ Try-catch –±–ª–æ–∫
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ 404 –æ—à–∏–±–æ–∫
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
   - ‚úÖ Graceful degradation

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### 1. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (‚úÖ –í–´–ü–û–õ–ù–ï–ù–û)
```bash
cd C:\project\AniWayImageSystem\AniWay-Reload\MangaService
.\gradlew.bat build -x test
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ BUILD SUCCESSFUL

### 2. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Docker (‚è≠Ô∏è –ü–†–û–ü–£–©–ï–ù–û)
```bash
cd C:\project\AniWayImageSystem\AniWay-Reload
docker-compose build manga-service
docker-compose up -d manga-service
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞ 10 –º–∞–Ω–≥
curl -X POST "http://localhost:8083/api/manga/auto-parse?page=1&limit=10"

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å (taskId –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞)
curl "http://localhost:8083/api/manga/auto-parse-status/{taskId}"

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
docker-compose logs -f manga-service | grep -E "(–ü–æ–ª—É—á–µ–Ω–∏–µ manga-info|–ø–æ–ø—ã—Ç–∫–∞|–£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω)"
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –í—Å–µ 10 –º–∞–Ω–≥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –ü—Ä–∏ 404 ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –¥–æ 5 —Ä–∞–∑
- –î–∞–∂–µ –µ—Å–ª–∏ 1 –º–∞–Ω–≥–∞ —É–ø–∞–ª–∞ ‚Üí –æ—Å—Ç–∞–ª—å–Ω—ã–µ 9 –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É
- `processed_slugs` —Ä–∞—Å—Ç–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ
- `failed_slugs` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–∞–Ω–≥–∏

## –õ–æ–≥–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ retry

```
INFO: –ü–æ–ª—É—á–µ–Ω–∏–µ manga-info –¥–ª—è 'another' (–ø–æ–ø—ã—Ç–∫–∞ 1/5)
WARN: JSON —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è 'another' (–ø–æ–ø—ã—Ç–∫–∞ 1/5): 404 NOT_FOUND. 
      –í–æ–∑–º–æ–∂–Ω–æ, MelonService –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 3000ms...
INFO: –ü–æ–ª—É—á–µ–Ω–∏–µ manga-info –¥–ª—è 'another' (–ø–æ–ø—ã—Ç–∫–∞ 2/5)
INFO: –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω manga-info –¥–ª—è 'another'
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–∫—Å–∞:** `FIX_AUTOPARSING_JSON_NOT_FOUND.md`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** `AUTOUPDATE_ONLY_NEW_CHAPTERS_PROOF.md`
- **–í—Å–µ —Ñ–∏–∫—Å—ã —Å–µ—Å—Å–∏–∏:** `ALL_FIXES_SUMMARY.md`

## –°—Ç–∞—Ç—É—Å

‚úÖ **–ö–û–î –ò–°–ü–†–ê–í–õ–ï–ù**
‚úÖ **GRADLE BUILD –£–°–ü–ï–®–ï–ù**
‚è≥ **DOCKER BUILD** - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
‚è≥ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï** - –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

## –ò—Ç–æ–≥

–ê–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ —Ç–µ–ø–µ—Ä—å **—É—Å—Ç–æ–π—á–∏–≤ –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø—Ä–æ–±–ª–µ–º–∞–º** —Å JSON —Ñ–∞–π–ª–∞–º–∏:

- **Retry –º–µ—Ö–∞–Ω–∏–∑–º:** –î–æ 15 —Å–µ–∫—É–Ω–¥ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–∞ –∫–∞–∂–¥—É—é –º–∞–Ω–≥—É
- **Graceful degradation:** –û—à–∏–±–∫–∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å
- **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞:** –°–ª–µ–¥—É—é—â–∏–µ –º–∞–Ω–≥–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏:** –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏
