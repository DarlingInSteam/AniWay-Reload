# AniWay Reload

AniWay Reload — производственная платформа для чтения манги и взаимодействия сообщества, построенная на микросервисной архитектуре. Система объединяет поток импорта контента, безопасную авторизацию, социальную активность и инструменты модерации в едином продукте, пригодном для развёртывания в облаке или on-premise.

## Возможности платформы

Платформа покрывает полный цикл взаимодействия с мангой: каталог с поиском и фильтрами, адаптивный ридер с сохранением прогресса, статистику чтения и персональные подборки. Социальный уровень включает публичные профили, ленту постов, форум, комментарии, личные сообщения, систему друзей, уведомления в реальном времени и рейтинги пользователей с XP и уровнями. Административные сценарии обеспечивают управление контентом, инструментами модерации и интеграцию с парсером для массового импорта выпусков.

## Архитектура и модули

Backend реализован в виде набора Spring Boot сервисов. AuthService отвечает за пользователей, права и проверки электронной почты; MangaService, ChapterService, ImageStorageService и MelonService формируют контентный контур и хранение изображений в MinIO; ForumService, CommentService, PostService, FriendService, MessageService, NotificationService и LevelService обеспечивают взаимодействие сообщества, обмен сообщениями, XP события и push-уведомления; GatewayService агрегирует API и единый вход, а поддерживающие сервисы подключаются через RabbitMQ. Каждый сервис использует отдельную базу PostgreSQL, миграции и Gradle-пайплайн, что позволяет масштабировать и обновлять компоненты независимо.

Frontend собран на React 18 с TypeScript, Vite и Tailwind CSS. Клиентская часть использует React Query для кэширования запросов, Zustand для управления состоянием, поддержку Markdown и набор собственных интерфейсных компонентов, обеспечивая адаптивный интерфейс читателя и административных панелей.

Инфраструктурный слой описан через Docker Compose и включает брокер RabbitMQ, MinIO, базы PostgreSQL и вспомогательные тома для обмена данными с парсером. Конфигурации dev и prod покрывают локальную разработку и развёртывание, поддерживая горячие перезапуски сервисов и консистентные переменные окружения.

## Локальная разработка

Для работы необходимы Docker Desktop, Node.js 20+, JDK 21 и Git. Быстрый запуск всей платформы выполняется через compose:

```powershell
docker compose -f docker-compose.dev.yml up --build
```

Клиентская разработка ведётся в папке `AniWayFrontend`:

```powershell
cd AniWayFrontend
npm install
npm run dev
```

Каждый микросервис содержит Gradle wrapper и может запускаться точечно:

```powershell
cd AuthService
.\gradlew.bat bootRun
```

Миграции баз данных располагаются в корне соответствующего сервиса (например, `AuthService/db_migration_*.sql`) и применяются автоматически при старте профильного окружения.

## Тестирование и качество

Frontend сборка и статический анализ выполняются командами:

```powershell
cd AniWayFrontend
npm run build
npm run lint
```

Backend тесты запускаются в любом сервисе через Gradle:

```powershell
cd MangaService
.\gradlew.bat test
```

CI/CD подготовлен к интеграции в GitHub Actions; pipeline собирает контейнеры и запускает модульные тесты сервисов.

## Документация

Подробные схемы и руководства находятся в каталоге `docs/`, в wiki репозитория и в тематических файлах (`ENHANCED_COMMENTS_IMPLEMENTATION.md`, `LEADERBOARDS.md`, `RABBITMQ_SETUP.md`, `SECURITY_ADMIN_PLAN.md` и др.). Дополнительная информация по API доступна в `wiki/` и автоматически генерируемой документации фронтенда.

## Лицензия

Проект распространяется по лицензии MIT. Полный текст лицензии доступен в файле `LICENSE`.

