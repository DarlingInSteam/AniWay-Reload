# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞ –º–∞–Ω–≥–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ MangaLib

## üìÖ –î–∞—Ç–∞: 6 –æ–∫—Ç—è–±—Ä—è 2025
## üéØ –°—Ç–∞—Ç—É—Å: –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞ –º–∞–Ω–≥–∏. –¢–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —Å–ø–∏—Å–∫–∞ slug'–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç **–Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–∞–ª–æ–≥–∞ MangaLib** –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞**.

---

## üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### 1. **MelonService (Python FastAPI)**

**–§–∞–π–ª:** `MelonService/api_server.py`

**–ù–æ–≤—ã–π endpoint:** `GET /catalog/{page}`

```python
@app.get("/catalog/{page}")
async def get_catalog(page: int, parser: str = "mangalib", limit: int = 60):
    """
    –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ slug'–æ–≤ –º–∞–Ω–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ MangaLib –ø–æ –Ω–æ–º–µ—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
    
    Args:
        page: –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–∞–ª–æ–≥–∞ (–Ω–∞—á–∏–Ω–∞—è —Å 1)
        parser: –ü–∞—Ä—Å–µ—Ä (mangalib, slashlib, hentailib)
        limit: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞–Ω–≥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
    
    Returns:
        JSON —Å–æ —Å–ø–∏—Å–∫–æ–º slug'–æ–≤ –º–∞–Ω–≥
    """
    # –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ MangaLib API
    api_url = "https://api.cdnlibs.org/api/manga"
    params = {
        "site_id": site_id,
        "page": page,
        "count": limit
    }
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º slug'—ã –∏–∑ –æ—Ç–≤–µ—Ç–∞
    slugs = [manga.get("slug") for manga in manga_list]
    
    return {
        "success": True,
        "page": page,
        "count": len(slugs),
        "slugs": slugs
    }
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (~0.5 —Å–µ–∫)
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–∞–Ω–≥ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ MangaLib API
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ slug'—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ pagination (–¥–æ 60 –º–∞–Ω–≥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)

---

### 2. **MelonIntegrationService (Java)**

**–§–∞–π–ª:** `MangaService/.../MelonIntegrationService.java`

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:** `getCatalogSlugs(int page, Integer limit)`

```java
/**
 * –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ slug'–æ–≤ –º–∞–Ω–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ MangaLib –ø–æ –Ω–æ–º–µ—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
 * 
 * @param page –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–∞–ª–æ–≥–∞ (–Ω–∞—á–∏–Ω–∞—è —Å 1)
 * @param limit –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞–Ω–≥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
 * @return Map —Å–æ —Å–ø–∏—Å–∫–æ–º slug'–æ–≤ (success, page, count, slugs)
 */
public Map<String, Object> getCatalogSlugs(int page, Integer limit) {
    int pageLimit = (limit != null && limit > 0) ? limit : 60;
    String url = melonServiceUrl + "/catalog/" + page + "?parser=mangalib&limit=" + pageLimit;
    
    ResponseEntity<Map> response = restTemplate.getForEntity(url, Map.class);
    Map<String, Object> result = response.getBody();
    
    return result;
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π endpoint MelonService
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

### 3. **AutoParsingService (Java)**

**–§–∞–π–ª:** `MangaService/.../AutoParsingService.java`

**–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥:** `startAutoParsing(Integer page, Integer limit)`

```java
/**
 * –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –º–∞–Ω–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ MangaLib –ø–æ –Ω–æ–º–µ—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
 */
public Map<String, Object> startAutoParsing(Integer page, Integer limit) {
    // 1. –°–æ–∑–¥–∞–µ–º –∑–∞–¥–∞—á—É –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞
    AutoParseTask task = new AutoParseTask();
    task.page = page != null ? page : 1;
    task.limit = limit;
    
    // 2. –ó–∞–ø—É—Å–∫–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
    processAutoParsingAsync(taskId, task.page, limit);
    
    return Map.of(
        "task_id", taskId,
        "status", "pending",
        "page", task.page,
        "limit", limit != null ? limit : "all"
    );
}
```

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ `processAutoParsingAsync`:**

```java
@Async
public CompletableFuture<Void> processAutoParsingAsync(String taskId, Integer page, Integer limit) {
    // –®–ê–ì 1: –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ slug'–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
    Map<String, Object> catalogResult = melonService.getCatalogSlugs(page, limit);
    List<String> slugs = (List<String>) catalogResult.get("slugs");
    
    // –®–ê–ì 2: –î–ª—è –∫–∞–∂–¥–æ–≥–æ slug –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏ –ø–∞—Ä—Å–∏–º
    for (String slug : slugs) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã
        if (mangaRepository.existsByMelonSlug(slug)) {
            task.skippedSlugs.add(slug);
            continue;
        }
        
        // –ü–∞—Ä—Å–∏–Ω–≥ + –±–∏–ª–¥–∏–Ω–≥ + –∏–º–ø–æ—Ä—Ç
        Map<String, Object> parseResult = melonService.startFullParsing(slug);
        // ... –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –∏–º–ø–æ—Ä—Ç
    }
    
    return CompletableFuture.completedFuture(null);
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ù–ï —Ç—Ä–µ–±—É–µ—Ç —Å–ø–∏—Å–æ–∫ slug'–æ–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç slugs –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ MangaLib
- ‚úÖ –§–∏–ª—å—Ç—Ä—É–µ—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞–Ω–≥–∏
- ‚úÖ –ü–∞—Ä—Å–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –º–∞–Ω–≥–∏

---

### 4. **ParserController (Java)**

**–§–∞–π–ª:** `MangaService/.../controller/ParserController.java`

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–π endpoint:** `POST /api/parser/auto-parse`

**–î–û:**
```java
@PostMapping("/auto-parse")
public ResponseEntity<Map<String, Object>> startAutoParsing(@RequestBody Map<String, Object> request) {
    List<String> slugs = (List<String>) request.get("slugs");  // ‚ùå –¢—Ä–µ–±–æ–≤–∞–ª —Å–ø–∏—Å–æ–∫
    Integer page = (Integer) request.get("page");
    Integer limit = (Integer) request.get("limit");
    
    autoParsingService.startAutoParsing(slugs, page, limit);
}
```

**–ü–û–°–õ–ï:**
```java
@PostMapping("/auto-parse")
public ResponseEntity<Map<String, Object>> startAutoParsing(@RequestBody Map<String, Object> request) {
    Integer page = (Integer) request.get("page");     // ‚úÖ –¢–æ–ª—å–∫–æ page
    Integer limit = (Integer) request.get("limit");   // ‚úÖ –ò limit
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (page == null || page <= 0) {
        return ResponseEntity.badRequest()
            .body(Map.of("error", "–ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ 0"));
    }
    
    autoParsingService.startAutoParsing(page, limit);
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ë–æ–ª—å—à–µ –ù–ï –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ slug'–æ–≤
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ `page` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) –∏ `limit` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

### 5. **Frontend (React/TypeScript)**

**–§–∞–π–ª:** `AniWayFrontend/src/components/admin/MangaManagement.tsx`

**–î–û:**
```tsx
const [slugsInput, setSlugsInput] = useState('')

<textarea
  placeholder="slug-mangi-1\nslug-mangi-2"
  value={slugsInput}
  onChange={(e) => setSlugsInput(e.target.value)}
/>
```

**–ü–û–°–õ–ï:**
```tsx
const [catalogPage, setCatalogPage] = useState<number>(1)
const [parseLimit, setParseLimit] = useState<number | null>(null)

<Input
  type="number"
  min="1"
  placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1, 2, 3...)"
  value={catalogPage}
  onChange={(e) => setCatalogPage(parseInt(e.target.value, 10) || 1)}
/>

<Input
  type="number"
  min="1"
  placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 20, 100)"
  value={parseLimit ?? ''}
  onChange={(e) => setParseLimit(value === '' ? null : parseInt(value, 10))}
/>
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –£–±—Ä–∞–Ω–∞ textarea –¥–ª—è –≤–≤–æ–¥–∞ slug'–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ "–ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–∞–ª–æ–≥–∞"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–û vs –ü–û–°–õ–ï

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –î–û | –ü–û–°–õ–ï |
|----------|----|----|
| **–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö** | –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å slug'—ã –∏–∑ MangaLib | –ü—Ä–æ—Å—Ç–æ —É–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚úÖ |
| **–£–¥–æ–±—Å—Ç–≤–æ** | –°–ª–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å slug'—ã | –ü—Ä–æ—Å—Ç–æ, –∫–∞–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚úÖ |
| **–°–∫–æ—Ä–æ—Å—Ç—å –≤–≤–æ–¥–∞** | ~5 –º–∏–Ω—É—Ç –Ω–∞ 50 –º–∞–Ω–≥ | ~5 —Å–µ–∫—É–Ω–¥ ‚úÖ |
| **–û—à–∏–±–∫–∏** | –í–æ–∑–º–æ–∂–Ω—ã –æ–ø–µ—á–∞—Ç–∫–∏ –≤ slug'–∞—Ö | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã ‚úÖ |

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å

| –®–∞–≥ | –î–û | –ü–û–°–õ–ï |
|-----|----|----|
| 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | –ü–æ–∏—Å–∫ –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ slug'–æ–≤ –≤—Ä—É—á–Ω—É—é | –£–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (1, 2, 3...) ‚úÖ |
| 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ | –ü–∞—Ä—Å–∏–Ω–≥ –≤—Ä—É—á–Ω—É—é –≤–≤–µ–¥—ë–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –∫ MangaLib API ‚úÖ |
| 3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ ‚úÖ |
| 4. –ü–∞—Ä—Å–∏–Ω–≥ | –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞–∂–¥–æ–π –º–∞–Ω–≥–∏ | –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞–∂–¥–æ–π –º–∞–Ω–≥–∏ ‚úÖ |

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–∞–ª–æ–≥–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç:
- –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 1
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: (–ø—É—Å—Ç–æ)

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- MelonService –ø–æ–ª—É—á–∞–µ—Ç 60 –º–∞–Ω–≥ —Å 1-–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–∞–ª–æ–≥–∞
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—É—é –º–∞–Ω–≥—É –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ –ë–î
- –ü–∞—Ä—Å—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –º–∞–Ω–≥–∏ (–¥–æ–ø—É—Å—Ç–∏–º, 45 –∏–∑ 60)
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 45, –ø—Ä–æ–ø—É—â–µ–Ω–æ 15
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–∞—Ä—Å–∏–Ω–≥ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç:
- –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 3
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 20

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- MelonService –ø–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 20 –º–∞–Ω–≥ —Å 3-–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—É—é –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
- –ü–∞—Ä—Å—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ (–¥–æ–ø—É—Å—Ç–∏–º, 18 –∏–∑ 20)
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 18, –ø—Ä–æ–ø—É—â–µ–Ω–æ 2
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–¥–µ –≤—Å–µ –º–∞–Ω–≥–∏ —É–∂–µ –µ—Å—Ç—å

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç:
- –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 1
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: (–ø—É—Å—Ç–æ)

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- MelonService –ø–æ–ª—É—á–∞–µ—Ç 60 –º–∞–Ω–≥
- –í—Å–µ 60 –º–∞–Ω–≥ —É–∂–µ –≤ –ë–î
- –ü–∞—Ä—Å–∏–Ω–≥ –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–ª—è –Ω–∏—Ö
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 0, –ø—Ä–æ–ø—É—â–µ–Ω–æ 60
- –í—Ä–µ–º—è: ~30 —Å–µ–∫ (–≤–º–µ—Å—Ç–æ ~5 –º–∏–Ω—É—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞)
```

---

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5) –∏ –ª–∏–º–∏—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30)
   ‚Üì
2. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /api/parser/auto-parse { page: 5, limit: 30 }
   ‚Üì
3. AutoParsingService –≤—ã–∑—ã–≤–∞–µ—Ç MelonIntegrationService.getCatalogSlugs(5, 30)
   ‚Üì
4. MelonIntegrationService –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç GET /catalog/5?limit=30 —É MelonService
   ‚Üì
5. MelonService –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ MangaLib API:
   GET https://api.cdnlibs.org/api/manga?site_id=1&page=5&count=30
   ‚Üì
6. MelonService –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ 30 slug'–æ–≤
   ‚Üì
7. AutoParsingService –ø–æ–ª—É—á–∞–µ—Ç slug'—ã –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ:
   –∞) –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ –ë–î (mangaRepository.existsByMelonSlug)
   –±) –ï—Å–ª–∏ –£–ñ–ï –ï–°–¢–¨ ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç (skippedSlugs)
   –≤) –ï—Å–ª–∏ –ù–û–í–ê–Ø ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ + –±–∏–ª–¥–∏–Ω–≥ + –∏–º–ø–æ—Ä—Ç
   ‚Üì
8. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
   - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: X –º–∞–Ω–≥
   - –ü—Ä–æ–ø—É—â–µ–Ω–æ: Y –º–∞–Ω–≥
   - –û—à–∏–±–æ–∫: Z –º–∞–Ω–≥
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü–∞—Ä—Å–∏–Ω–≥ —Å 1-–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```bash
# Frontend: –≤–≤–æ–¥–∏–º page=1, limit=10
# –û–∂–∏–¥–∞–Ω–∏–µ: –ø–æ–ª—É—á–µ–Ω–∏–µ 10 slug'–æ–≤ –∏ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–æ–≤—ã—Ö

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
[INFO] –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –º–∞–Ω–≥: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 1, –ª–∏–º–∏—Ç 10
[INFO] –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω –∫–∞—Ç–∞–ª–æ–≥: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 1, –Ω–∞–π–¥–µ–Ω–æ 10 –º–∞–Ω–≥
[INFO] –ü–æ–ª—É—á–µ–Ω–æ 10 –º–∞–Ω–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
[INFO] –ú–∞–Ω–≥–∞ —Å slug 'one-punch-man' —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
[INFO] –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è slug: overlord
...
```

### –¢–µ—Å—Ç 2: –í—Å–µ –º–∞–Ω–≥–∏ —É–∂–µ –≤ —Å–∏—Å—Ç–µ–º–µ

```bash
# Frontend: –≤–≤–æ–¥–∏–º page=1, limit=60
# –û–∂–∏–¥–∞–Ω–∏–µ: –≤—Å–µ –º–∞–Ω–≥–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã, –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
[INFO] –ü–æ–ª—É—á–µ–Ω–æ 60 –º–∞–Ω–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
[INFO] –ú–∞–Ω–≥–∞ —Å slug 'manga-1' —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
[INFO] –ú–∞–Ω–≥–∞ —Å slug 'manga-2' —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
...
[INFO] –ê–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ=0, –ø—Ä–æ–ø—É—â–µ–Ω–æ=60, –æ—à–∏–±–æ–∫=0
```

### –¢–µ—Å—Ç 3: Endpoint –∫–∞—Ç–∞–ª–æ–≥–∞ –Ω–∞–ø—Ä—è–º—É—é

```bash
# –¢–µ—Å—Ç –Ω–æ–≤–æ–≥–æ endpoint
curl "http://localhost:8087/catalog/1?parser=mangalib&limit=5"

# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
{
  "success": true,
  "page": 1,
  "parser": "mangalib",
  "limit": 5,
  "total": 15000,
  "count": 5,
  "slugs": [
    "one-punch-man",
    "overlord",
    "solo-leveling",
    "bleach",
    "naruto"
  ]
}
```

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend (Java):

1. ‚úÖ `MangaService/.../service/AutoParsingService.java`
   - –ò–∑–º–µ–Ω—ë–Ω –º–µ—Ç–æ–¥ `startAutoParsing(Integer page, Integer limit)` (–≤–º–µ—Å—Ç–æ —Å–ø–∏—Å–∫–∞ slug'–æ–≤)
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `processAutoParsingAsync` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `page` –≤ –∫–ª–∞—Å—Å `AutoParseTask`

2. ‚úÖ `MangaService/.../service/MelonIntegrationService.java`
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getCatalogSlugs(int page, Integer limit)`
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º endpoint MelonService

3. ‚úÖ `MangaService/.../controller/ParserController.java`
   - –ò–∑–º–µ–Ω—ë–Ω endpoint `/auto-parse`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `page` –∏ `limit` (–ù–ï slug'—ã)
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### Backend (Python):

4. ‚úÖ `MelonService/api_server.py`
   - –î–æ–±–∞–≤–ª–µ–Ω endpoint `GET /catalog/{page}`
   - –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ MangaLib API
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ slug'–æ–≤

### Frontend (React/TypeScript):

5. ‚úÖ `AniWayFrontend/src/components/admin/MangaManagement.tsx`
   - –£–±—Ä–∞–Ω–∞ textarea –¥–ª—è –≤–≤–æ–¥–∞ slug'–æ–≤
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ "–ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–∞–ª–æ–≥–∞"
   - –ò–∑–º–µ–Ω—ë–Ω –∑–∞–ø—Ä–æ—Å: `{ page, limit }` –≤–º–µ—Å—Ç–æ `{ slugs, page, limit }`

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞:
- ‚úÖ –ù–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (—É–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–º–µ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è slug'–æ–≤)
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –Ω–∞—á–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ (~5 —Å–µ–∫ –≤–º–µ—Å—Ç–æ ~5 –º–∏–Ω—É—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏)
- ‚úÖ –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ (–Ω–µ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –≤ slug'–∞—Ö)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞–Ω–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ API MangaLib
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ó–∞–ø—Ä–æ—Å –∫–∞—Ç–∞–ª–æ–≥–∞: ~0.5 —Å–µ–∫
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö –º–∞–Ω–≥ (—ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏)

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–î–∞—Ç–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** 6 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ì–æ—Ç–æ–≤–æ –∫ production  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –û–±–Ω–æ–≤–ª–µ–Ω–∞

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤: `docker-compose up --build`
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `OPTIMIZATION_IMPLEMENTED.md` - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞–Ω–≥–∏
- `TZ_VERIFICATION.md` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¢–ó
- `AUTO_PARSING_USER_GUIDE.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–î–∞—Ç–∞:** 6 –æ–∫—Ç—è–±—Ä—è 2025
