# Настройка логов
Благодаря унификации порталов ошибок и предупреждений Melon может поставлять расширенные средства работы с такого рода данными. Для каждого парсера при первом запуске генерируется файл _Configs/{PARSER}/logger.json_, который и определяет поведение системы.

## telebot
Melon позволяет отправлять отчёты об ошибках в Telegram. Данная секция позволяет настроить отсылку и фильтрацию данных.

Помните, что Melon обрабатывает записи в логи только через поставляемые порты, потому ошибки и предупреждения из сторонних библиотек не могут быть отправлены на данный момент.
___
```JSON
"enable": false
```
Переключает отправку отчётов.
___
```JSON
"bot_token": ""
```
Сюда необходимо занести токен бота Telegram (можно получить у [BotFather](https://t.me/BotFather)).
___
```JSON
"chat_id": 0
```
Сюда необходимо занести ID чата Telegram, в который будут направляться отчёты (можно узнать у [Chat ID Bot](https://t.me/chat_id_echo_bot)). Если чат групповой, бот должен являться администратором.
___
```JSON
"comment": ""
```
Дополнительный комментарий, который указывается статически и добавляется к каждому отчёту.
___
```JSON
"rules": {}
```
Здесь включаются и/или задаются фильтры для отправляемых отчётов.

| **Правило** | **Описание** |
|---|---|
| _attach_log_ | Переключает прикрепление файла лога к отправляемому отчёту. |
| _forbidden_commands_ | Список названий команд, для которых отправка отчётов будет отключена. |
| _ignored_requests_errors_ | Список кодов HTTP, для которых отправка отчётов будет отключена. Возможно определение кода `null`, отвечающего за возникновение исключения Python во время выполнения запроса. |
| _title_not_found_ | Переключает отправку отчёта: тайтл не найден. Содержит алиас и, по возможности, ID тайтла. |
| _chapter_not_found_ | Переключает отправку отчёта: глава не найдена. Содержит ID главы. |
| _downloading_error_ | Переключает отправку отчёта: ошибка скачивания файла. Содержит URL файла. |
| _critical_ | Переключает отправку критических ошибок (приводящих к нештатной остановке Melon). |
| _errors_ | Переключает отправку ошибок. |
| _warnings_ | Переключает отправку предупреждений. |

## cleaner
При автоматической работе Melon может генерировать очень много логов, и не все из них являются полезными. Данная секция помогает настроить правила удаления ненужных файлов.

Для инициализации правила необходимо добавить пару ключ-значения в соответствующую секцию: название команды и уровень важности лога по примеру ниже.
```JSON
"cleaner": {
	"parse": 0,
	"collect": 1,
	"repair": 2,
	"get": 3
}
```
### Уровни важности логов
| **Правило** | **Значение**                                       |
|-------------|----------------------------------------------------|
| 0           | Всегда сохранять.                                  |
| 1           | Сохранять, если имеются ошибки.                    |
| 2           | Сохранять, если имеются предупреждения или ошибки. |
| 3           | Удалять.                                           |