# üéØ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ MangaLib slug

## üìå –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ slug –Ω–∞ `ID--slug`, —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—á–∞–ª–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å **–¥—É–±–ª–∏–∫–∞—Ç—ã** —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –º–∞–Ω–≥–∏:

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è: `sweet-home-kim-carnby-` (—Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç, –±–µ–∑ ID)
- –ü–∞—Ä—Å–µ—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç: `3754--sweet-home-kim-carnby-` (–Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç, —Å ID)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: `existsByMelonSlug("3754--sweet-home-kim-carnby-")` ‚Üí **–ù–ï –ù–ê–•–û–î–ò–¢** –∑–∞–ø–∏—Å—å –≤ –ë–î
- –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–∏—Å—Ç–µ–º–∞ –¥—É–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –Ω–æ–≤–∞—è –º–∞–Ω–≥–∞ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç

---

## üîß –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ **–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è slug** –ø–µ—Ä–µ–¥:
1. –ü—Ä–æ–≤–µ—Ä–∫–æ–π –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ `AutoParsingService`
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î –≤ `MelonIntegrationService`

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:

#### 1. **AutoParsingService.java**

**–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:**
```java
/**
 * –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç slug, —É–±–∏—Ä–∞—è –ø—Ä–µ—Ñ–∏–∫—Å ID-- –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å.
 * MangaLib –∏–∑–º–µ–Ω–∏–ª —Ñ–æ—Ä–º–∞—Ç: —Ç–µ–ø–µ—Ä—å slug'–∏ –∏–º–µ—é—Ç —Ñ–æ—Ä–º–∞—Ç "ID--slug" (–Ω–∞–ø—Ä–∏–º–µ—Ä "7580--i-alone-level-up")
 * –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –ø–æ—Å–ª–µ "--"
 * 
 * @param slug –∏—Å—Ö–æ–¥–Ω—ã–π slug (–º–æ–∂–µ—Ç –±—ã—Ç—å "7580--i-alone-level-up" –∏–ª–∏ "i-alone-level-up")
 * @return –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π slug –±–µ–∑ ID (–≤—Å–µ–≥–¥–∞ "i-alone-level-up")
 */
private String normalizeSlug(String slug) {
    if (slug == null || slug.isEmpty()) {
        return slug;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç "ID--slug"
    if (slug.contains("--")) {
        String[] parts = slug.split("--", 2);
        // –ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å - —á–∏—Å–ª–æ (ID), –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Ç–æ—Ä—É—é —á–∞—Å—Ç—å (slug)
        if (parts.length == 2 && parts[0].matches("\\d+")) {
            logger.debug("–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è slug: '{}' -> '{}'", slug, parts[1]);
            return parts[1];
        }
    }
    
    // –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–µ "ID--slug", –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å
    return slug;
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∏ ~192-210):**
```java
// –ë–´–õ–û:
if (mangaRepository.existsByMelonSlug(slug)) {
    logger.info("–ú–∞–Ω–≥–∞ —Å slug '{}' —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º", slug);
    // ...
}

// –°–¢–ê–õ–û:
// MangaLib –∏–∑–º–µ–Ω–∏–ª —Ñ–æ—Ä–º–∞—Ç: slug –º–æ–∂–µ—Ç –±—ã—Ç—å "7580--i-alone-level-up"
// –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–æ "i-alone-level-up"
String normalizedSlug = normalizeSlug(slug);

if (mangaRepository.existsByMelonSlug(normalizedSlug)) {
    logger.info("–ú–∞–Ω–≥–∞ —Å slug '{}' (normalized: '{}') —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º", 
        slug, normalizedSlug);
    // ...
}
```

#### 2. **MelonIntegrationService.java**

**–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:**
```java
/**
 * –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç slug –¥–ª—è MangaLib, —É–±–∏—Ä–∞—è –ø—Ä–µ—Ñ–∏–∫—Å ID-- –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å.
 * MangaLib –∏–∑–º–µ–Ω–∏–ª —Ñ–æ—Ä–º–∞—Ç: —Ç–µ–ø–µ—Ä—å slug'–∏ –∏–º–µ—é—Ç —Ñ–æ—Ä–º–∞—Ç "ID--slug" (–Ω–∞–ø—Ä–∏–º–µ—Ä "7580--i-alone-level-up")
 * –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –≤ –ë–î –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–æ "i-alone-level-up"
 * 
 * @param slug –∏—Å—Ö–æ–¥–Ω—ã–π slug (–º–æ–∂–µ—Ç –±—ã—Ç—å "7580--i-alone-level-up" –∏–ª–∏ "i-alone-level-up")
 * @return –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π slug –±–µ–∑ ID (–≤—Å–µ–≥–¥–∞ "i-alone-level-up")
 */
private String normalizeSlugForMangaLib(String slug) {
    if (slug == null || slug.isEmpty()) {
        return slug;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç "ID--slug"
    if (slug.contains("--")) {
        String[] parts = slug.split("--", 2);
        // –ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å - —á–∏—Å–ª–æ (ID), –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Ç–æ—Ä—É—é —á–∞—Å—Ç—å (slug)
        if (parts.length == 2 && parts[0].matches("\\d+")) {
            logger.debug("–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è MangaLib slug: '{}' -> '{}'", slug, parts[1]);
            return parts[1];
        }
    }
    
    // –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–µ "ID--slug", –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å
    return slug;
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ slug (—Å—Ç—Ä–æ–∫–∏ ~1010-1020):**
```java
private Manga createMangaFromData(Map<String, Object> mangaInfo, String filename) {
    Manga manga = new Manga();

    // MangaLib –∏–∑–º–µ–Ω–∏–ª —Ñ–æ—Ä–º–∞—Ç slug: —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –±—ã—Ç—å "7580--i-alone-level-up"
    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–æ "i-alone-level-up" –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏
    String normalizedSlug = normalizeSlugForMangaLib(filename);
    
    // –ö–†–ò–¢–ò–ß–ù–û: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º melonSlug –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    manga.setMelonSlug(normalizedSlug);
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
}
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**

1. **API –∫–∞—Ç–∞–ª–æ–≥–∞** ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `slug_url = "7580--i-alone-level-up"`
2. **AutoParsingService** ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –¥–æ `"i-alone-level-up"` ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
3. **–ü–∞—Ä—Å–µ—Ä** ‚Üí –ø–æ–ª—É—á–∞–µ—Ç `"7580--i-alone-level-up"` ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ—Ç ID=7580, slug="i-alone-level-up"
4. **MelonIntegrationService** ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç `filename` –¥–æ `"i-alone-level-up"` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î

**–í –ë–î –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:** `sweet-home-kim-carnby-` (–±–µ–∑ ID)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –í—Ö–æ–¥—è—â–∏–π slug: `3754--sweet-home-kim-carnby-`
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π: `sweet-home-kim-carnby-`
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `existsByMelonSlug("sweet-home-kim-carnby-")` ‚Üí **–ù–ê–•–û–î–ò–¢** ‚úÖ
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä–æ–ø—É—Å–∫–∞–µ–º, –¥—É–±–ª–∏–∫–∞—Ç –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

```bash
cd C:\project\AniWayImageSystem\AniWay-Reload\MangaService
.\gradlew.bat build -x test
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ BUILD SUCCESSFUL

### 2. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤–∞—è –º–∞–Ω–≥–∞ (–Ω–µ –≤ –ë–î)
- –í—Ö–æ–¥—è—â–∏–π slug: `7580--i-alone-level-up`
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π: `i-alone-level-up`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î: –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç: **–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è** ‚úÖ

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –º–∞–Ω–≥–∞ (—É–∂–µ –≤ –ë–î)
- –í—Ö–æ–¥—è—â–∏–π slug: `3754--sweet-home-kim-carnby-`
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π: `sweet-home-kim-carnby-`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î: –Ω–∞–π–¥–µ–Ω–∞ (–∑–∞–ø–∏—Å—å —Å `melon_slug = "sweet-home-kim-carnby-"`)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: **–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è** ‚úÖ

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç slug (–±–µ–∑ ID)
- –í—Ö–æ–¥—è—â–∏–π slug: `wind-breaker`
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π: `wind-breaker` (–Ω–µ—Ç `--`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î: —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –†–µ–∑—É–ª—å—Ç–∞—Ç: **–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** ‚úÖ

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### 1. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
cd C:\project\AniWayImageSystem\AniWay-Reload

git add MangaService/src/main/java/shadowshift/studio/mangaservice/service/AutoParsingService.java
git add MangaService/src/main/java/shadowshift/studio/mangaservice/service/MelonIntegrationService.java
git commit -m "fix: –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è MangaLib slug –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤"
git push origin develop
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh darling@compute-vm-12-24-30-ssd-1758530558688

cd ~/AniWay-Reload

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git stash push -m "Production settings"
git pull origin develop
git stash pop

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.prod.yml build manga-service
docker-compose -f docker-compose.prod.yml up -d manga-service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs -f aniway-reload-manga-service-1
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**

```
[INFO] –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è slug: '7580--i-alone-level-up' -> 'i-alone-level-up'
[INFO] –ú–∞–Ω–≥–∞ —Å slug '7580--i-alone-level-up' (normalized: 'i-alone-level-up') —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
[DEBUG] –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è MangaLib slug: '3754--sweet-home-kim-carnby-' -> 'sweet-home-kim-carnby-'
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 1 (60 –º–∞–Ω–≥)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞–Ω–≥–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–æ–≤—ã–µ –º–∞–Ω–≥–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

---

## üìä –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **AutoParsingService.java**
- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** –ú–µ—Ç–æ–¥ `normalizeSlug(String slug)` (28 —Å—Ç—Ä–æ–∫)
- **–ò–∑–º–µ–Ω–µ–Ω–æ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π (—Å—Ç—Ä–æ–∫–∏ ~192-210)

### 2. **MelonIntegrationService.java**
- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** –ú–µ—Ç–æ–¥ `normalizeSlugForMangaLib(String slug)` (28 —Å—Ç—Ä–æ–∫)
- **–ò–∑–º–µ–Ω–µ–Ω–æ:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ slug —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤ `createMangaFromData()` (—Å—Ç—Ä–æ–∫–∏ ~1010-1020)

**–í—Å–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:** ~60 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –î—É–±–ª–∏–∫–∞—Ç—ã –≤—Å—ë –µ—â—ë —Å–æ–∑–¥–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–µ—à –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose -f docker-compose.prod.yml restart manga-service

# –ò–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à Hibernate (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ "Duplicate key" –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ `melon_slug` –≤ –ë–î

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –∑–Ω–∞—á–∏—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç! –î—É–±–ª–∏–∫–∞—Ç –Ω–µ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω.

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ slug'–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä—ã–π –∫–æ–¥ –µ—â—ë –≤ –ø–∞–º—è—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –æ—á–∏—Å—Ç–∫–æ–π –∫–µ—à–∞
docker-compose -f docker-compose.prod.yml build --no-cache manga-service
docker-compose -f docker-compose.prod.yml up -d manga-service
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git
- [ ] –ó–∞–ø—É—à–∏—Ç—å –Ω–∞ GitHub (develop branch)
- [ ] –ó–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ SSH
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git stash`)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ (`git pull origin develop`)
- [ ] –í–µ—Ä–Ω—É—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git stash pop`)
- [ ] –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ (`docker-compose build manga-service`)
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (`docker-compose up -d manga-service`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (`docker logs -f ...`)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞–Ω–≥–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–æ–≤—ã–µ –º–∞–Ω–≥–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î: –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–æ `melon_slug`

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞–Ω–≥–∏ **–ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è** (–Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥—É–±–ª–∏–∫–∞—Ç—ã)
- ‚úÖ –ù–æ–≤—ã–µ –º–∞–Ω–≥–∏ **–∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π slug: `sweet-home-kim-carnby-` (–±–µ–∑ ID)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤: `ID--slug` –∏ `slug`
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: —Å—Ç–∞—Ä—ã–µ slug'–∏ –±–µ–∑ ID —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
[INFO] –ü–æ–ª—É—á–µ–Ω–æ 60 –º–∞–Ω–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
[DEBUG] –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è slug: '7580--i-alone-level-up' -> 'i-alone-level-up'
[INFO] –ú–∞–Ω–≥–∞ —Å slug '7580--i-alone-level-up' (normalized: 'i-alone-level-up') —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
[INFO] –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è slug: 12345--new-manga-title
[DEBUG] –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è MangaLib slug: '12345--new-manga-title' -> 'new-manga-title'
[INFO] –ú–∞–Ω–≥–∞ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞: new-manga-title
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–§–æ—Ä–º–∞—Ç –≤ –ë–î:** –í—Å–µ–≥–¥–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è `slug` –±–µ–∑ ID –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
2. **–§–æ—Ä–º–∞—Ç –∏–∑ API:** –ü—Ä–∏—Ö–æ–¥–∏—Ç `ID--slug`, –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
3. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å `UNIQUE` –Ω–∞ `melon_slug`
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ (—Ç–æ–ª—å–∫–æ split –∏ regex –ø—Ä–æ–≤–µ—Ä–∫–∞)

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 07.10.2025  
**–í–µ—Ä—Å–∏—è:** 3.0 (duplicate check with normalization)  
**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç:** MANGALIB_SLUG_URL_FIX.md
